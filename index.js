(function(){var N;var M;var L;var K;var J=[];var I;var H;var G;function F(b,a){b.style.backgroundColor=a;b.setAttribute("data-changed","t");return b}function E(d,c){var b=J[d-H.a];var a=J[d+1];var g=J[d+H.a];var f=J[d-1];var e=[];if(d>=H.a&&b.getAttribute("data-changed")!=="t"){e.push(F(b,c))}if(d%H.a!==(H.a-1)&&a.getAttribute("data-changed")!=="t"){e.push(F(a,c))}if(d<(I-H.a)&&g.getAttribute("data-changed")!=="t"){e.push(F(g,c))}if(d%H.a!==0&&f.getAttribute("data-changed")!=="t"){e.push(F(f,c))}return e}function D(d,c){var b=[];for(var a=0;a<d.length;++a){b=b.concat(E(J.indexOf(d[a]),c))}if(b.length){setTimeout(function(){D(b,c)},G)}else{if(!document.querySelectorAll('.block[data-changed="f"]').length){setTimeout(x,5000)}}}function C(a){a.setAttribute("data-changed","t");D([a],a.style.backgroundColor)}function B(){return"#"+Math.floor(Math.random()*16777215).toString(16)}function A(c,b){var a=document.createElement("div");a.className="block";a.style.width=c;a.style.height=b;a.style.backgroundColor=B();a.setAttribute("data-changed","f");return a}function z(){var b=Math.floor(Math.sqrt(I));var a=I/b;while(a%1!==0){b-=1;a=I/b}return{a:b,b:a}}function y(){var d=document.createDocumentFragment();var c=parseInt(N.value);I=c=c>0?c:1;H=z();G=500/Math.max(H.a,H.b);var b=(100/H.a)+"%";var a=(100/H.b)+"vh";while(c>0){var e=A(b,a);d.appendChild(e);J.push(e);c-=1}L.classList.toggle("hidden");K.classList.toggle("hidden");K.appendChild(d)}function x(){N.value="";L.classList.toggle("hidden");K.classList.toggle("hidden");while(K.firstChild){K.removeChild(K.firstChild)}N.select();J=[];I=undefined;H=undefined;G=undefined}function w(b){var a=b.target;if(a===M&&!J.length){y()}else{if(a.className==="block"&&a.getAttribute("data-changed")==="f"){C(a)}}}function v(c){var b=c.which||c.keyCode;var a=document.activeElement;if(b===13&&a!==M){w({target:M})}else{if(b===49&&a!==N){N.select()}else{if(b===27){x()}}}}function u(){document.removeEventListener("DOMContentLoaded",u);N=document.getElementById("count");M=document.getElementById("button");L=document.getElementById("input");K=document.getElementById("container");document.body.addEventListener("click",w);document.body.addEventListener("keyup",v);N.select()}document.addEventListener("DOMContentLoaded",u)}());